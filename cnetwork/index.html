<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zehai.info","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="基础概念 速率（比特率）：在数字信道传送数据位数的速率,b&#x2F;s,kb&#x2F;s,Mb&#x2F;s(mbps:Mb per second)（运营商常用，进制10进制），也可以理解为带宽的概念 存储容量，1Byte&#x3D;8bit（进制1024） 时延：发送时延+传播时延+排队时延+处理时延 RTT：往返时延，发送开始到发送方收到接收方的ack，即2*传输时延，不含发送时延，处理时延等 信源：产生和发送数据的源头 信宿：">
<meta property="og:type" content="website">
<meta property="og:title" content="Network">
<meta property="og:url" content="http://zehai.info/cnetwork/index.html">
<meta property="og:site_name" content="Zehai&#39;blog">
<meta property="og:description" content="基础概念 速率（比特率）：在数字信道传送数据位数的速率,b&#x2F;s,kb&#x2F;s,Mb&#x2F;s(mbps:Mb per second)（运营商常用，进制10进制），也可以理解为带宽的概念 存储容量，1Byte&#x3D;8bit（进制1024） 时延：发送时延+传播时延+排队时延+处理时延 RTT：往返时延，发送开始到发送方收到接收方的ack，即2*传输时延，不含发送时延，处理时延等 信源：产生和发送数据的源头 信宿：">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://zehai.info/img/osi.png">
<meta property="og:image" content="http://zehai.info/img/encode.png">
<meta property="og:image" content="http://zehai.info/img/差分曼彻斯特.png">
<meta property="og:image" content="http://zehai.info/img/帧.png">
<meta property="og:image" content="http://zehai.info/img/PPP.png">
<meta property="og:image" content="http://zehai.info/img/HDLC.png">
<meta property="og:image" content="http://zehai.info/img/TCPIP.png">
<meta property="og:image" content="http://zehai.info/img/ip.png">
<meta property="og:image" content="http://zehai.info/img/CIDR">
<meta property="og:image" content="http://zehai.info/img/icmp.png">
<meta property="og:image" content="http://zehai.info/img/ip分类.png">
<meta property="og:image" content="http://zehai.info/img/OSPF.png">
<meta property="og:image" content="http://zehai.info/img/tcp.png">
<meta property="og:image" content="http://zehai.info/img/tcp建立连接.png">
<meta property="og:image" content="http://zehai.info/img/tcp释放连接.png">
<meta property="article:published_time" content="2019-03-14T09:20:18.000Z">
<meta property="article:modified_time" content="2021-02-24T13:38:41.000Z">
<meta property="article:author" content="Zhang Zehai">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zehai.info/img/osi.png">

<link rel="canonical" href="http://zehai.info/cnetwork/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Network | Zehai'blog
</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zehai'blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-network">

    <a href="/cnetwork/" rel="section"><i class="fa fa-mobile fa-fw"></i>network</a>

  </li>
        <li class="menu-item menu-item-computeros">

    <a href="/ComputerOS/" rel="section"><i class="fa fa-desktop fa-fw"></i>computerOs</a>

  </li>
        <li class="menu-item menu-item-interview">

    <a href="/Interview/" rel="section"><i class="fa fa-user fa-fw"></i>interview</a>

  </li>
        <li class="menu-item menu-item-java">

    <a href="/Java/" rel="section"><i class="fa fa-tasks fa-fw"></i>java</a>

  </li>
        <li class="menu-item menu-item-like">

    <a href="/Like/" rel="section"><i class="fa fa-book fa-fw"></i>like</a>

  </li>
        <li class="menu-item menu-item-nodejs">

    <a href="/Nodejs/" rel="section"><i class="fa fa-plane fa-fw"></i>nodejs</a>

  </li>
        <li class="menu-item menu-item-redis">

    <a href="/Redis/" rel="section"><i class="fa fa-database fa-fw"></i>redis</a>

  </li>
        <li class="menu-item menu-item-structure">

    <a href="/Structure/" rel="section"><i class="fa fa-table fa-fw"></i>structure</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="en">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">Network
</h1>

<div class="post-meta">
  

</div>

</header>

      
      
      
      <div class="post-body">
          <h1 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h1><ul>
<li>速率（比特率）：在数字信道传送数据位数的速率,b/s,kb/s,Mb/s(mbps:Mb per second)（运营商常用，<strong>进制10进制</strong>），也可以理解为带宽的概念</li>
<li>存储容量，1Byte=8bit（进制1024）</li>
<li>时延：发送时延+传播时延+排队时延+处理时延</li>
<li>RTT：往返时延，发送开始到发送方收到接收方的ack，即2*传输时延，不含发送时延，处理时延等</li>
<li>信源：产生和发送数据的源头</li>
<li>信宿：接收数据的终点</li>
<li>信道：信号的传输媒介</li>
<li>单工同行：电报，一方只能发送，一方只能接受</li>
<li>半双工通信：对讲机，双方错开说话</li>
<li>全双工通信：视频电话，双方同时说</li>
</ul>
<h1 id="OSI-七层模型，TCPIP四层"><a href="#OSI-七层模型，TCPIP四层" class="headerlink" title="OSI 七层模型，TCPIP四层"></a>OSI 七层模型，TCPIP四层</h1><h2 id="why"><a href="#why" class="headerlink" title="why"></a>why</h2><p>解决互联网异构问题</p>
<h2 id="what"><a href="#what" class="headerlink" title="what"></a>what</h2><table>
<thead>
<tr>
<th>序号</th>
<th>名称</th>
<th>TCP/IP</th>
<th>常见协议</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td>应用层</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>表示层</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>会话层</td>
<td>应用层</td>
<td></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>传输层</td>
<td>传输层</td>
<td></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>网络层</td>
<td>网际层</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>数据链路层</td>
<td>网络接口层</td>
<td></td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>物理层</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="\img\osi.png" alt=""></p>
<h2 id="difference"><a href="#difference" class="headerlink" title="difference"></a>difference</h2><table>
<thead>
<tr>
<th>index</th>
<th>OSI</th>
<th>TCPIP</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>理论模型</td>
<td>实际应用</td>
</tr>
<tr>
<td>2-网络层区别</td>
<td>无连接+面向连接</td>
<td>无连接</td>
</tr>
<tr>
<td>3- 传输层区别</td>
<td>面向连接</td>
<td>无连接+面向连接</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>面向连接：TCP的建立连接，然后收发数据，断开连接</li>
<li>无连接：无需建立连接，直接发数据</li>
<li>五层参考模型就是将TCP/IP的网络接口层分成了：数据链路层和物理层，从底向上依次是：物理层，数据链路层，网络层，传输层，应用层</li>
</ul>
<h1 id="传输介质"><a href="#传输介质" class="headerlink" title="传输介质"></a>传输介质</h1><h2 id="what-1"><a href="#what-1" class="headerlink" title="what"></a>what</h2><p>传输介质是第0层，是物理层下面的载体</p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>导向性传输介质：固体，如光纤，双绞线，同轴电缆（电视线）</p>
<p>非导向类传输介质：空气，真空，海水，等</p>
<h1 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h1><h2 id="why-1"><a href="#why-1" class="headerlink" title="why"></a>why</h2><p>解决计算机的传输媒体多样性的问题</p>
<h2 id="what-2"><a href="#what-2" class="headerlink" title="what"></a>what</h2><p>主机发送数据无需关心底层的介质是双绞线还是光纤，或者是华为家生产的，还是中兴家生产的。</p>
<p>类比就是你要发一个包裹，你可以选择四通一达以及顺丰，也不用管包裹走水陆空那一路，你只要负责发包裹，剩下的事情，物理层解决</p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul>
<li><strong>码元</strong>：固定时长的信号波形（数字脉冲），举个例子：二进制码元，0和1，四进制码元，00,01,10,11，八进制码元000,001,010,100,011,110,101,111，即，一个码元可以携带多个比特信息</li>
<li>码元传输速率：1s传输多少个码元，单位：波特（Baud）</li>
<li>信息传输速率：码元传输速率*n（1个码元有n个比特表示，如101，n=3）,值就是带宽b/s</li>
<li>编码</li>
<li>解码</li>
</ul>
<h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><p><img src="..\img\encode.png" alt=""></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>二进制数据</td>
<td></td>
</tr>
<tr>
<td>非归零编码（NRZ）</td>
<td>简单，但无法检错，无法保持同步</td>
</tr>
<tr>
<td>归零编码（RZ）</td>
<td>一个码元内要恢复到零</td>
</tr>
<tr>
<td>曼彻斯特编码</td>
<td>下跳是1，上跳是0</td>
</tr>
<tr>
<td>差分曼彻斯特编码</td>
<td>同1异0</td>
</tr>
</tbody>
</table>
<p><img src="\img\差分曼彻斯特.png" alt="">其他了解：反向不归零编码（NRZI），4B/5B编码</p>
<h2 id="奈氏准则（奈奎斯特定理，传输极限，避免码间串扰）"><a href="#奈氏准则（奈奎斯特定理，传输极限，避免码间串扰）" class="headerlink" title="奈氏准则（奈奎斯特定理，传输极限，避免码间串扰）"></a>奈氏准则（奈奎斯特定理，传输极限，避免码间串扰）</h2><h3 id="definition"><a href="#definition" class="headerlink" title="definition"></a>definition</h3><p>在理想环境下，为了避免码间串扰，极限码元传输速率为2W Baud，W为信道带宽，单位Hz</p>
<h3 id="极限数据传输率"><a href="#极限数据传输率" class="headerlink" title="极限数据传输率"></a>极限数据传输率</h3><blockquote>
<p>$$<br>v=2W\log_2 V(b.s)<br>$$</p>
</blockquote>
<ul>
<li>W:带宽（Hz）</li>
<li>V:几种码元/码元的离散电平数目</li>
</ul>
<h3 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h3><ul>
<li>码元传输速率有上限</li>
<li>带宽越宽，极限传输率越高</li>
<li>使用多元制的调制方法，提高码元携带的比特数</li>
</ul>
<h2 id="香农定理（信噪比）"><a href="#香农定理（信噪比）" class="headerlink" title="香农定理（信噪比）"></a>香农定理（信噪比）</h2><h3 id="definition-1"><a href="#definition-1" class="headerlink" title="definition"></a>definition</h3><blockquote>
<p>$$<br>信噪比= \frac{信号的平均功率}{噪声的平均功率}<br>$$</p>
<p>记作：S/N<br>$$<br>信噪比（dB）=10\ln (S/N)<br>$$<br>单位：dB，分贝</p>
<hr>
<p>以上是信噪比的两种表现形式</p>
</blockquote>
<p>香农定理：解决了带宽受限有噪音的信道中，不产生误差，信息的数据传输率的上限（<strong>奈斯是理想环境</strong>）</p>
<h3 id="传输速率"><a href="#传输速率" class="headerlink" title="传输速率"></a>传输速率</h3><blockquote>
<p>$$<br>v=W\log_2 (1+S/N)<br>$$</p>
<p>单位：b/s</p>
<p>W：带宽Hz</p>
<p>题目如果说信噪比是1000，即S/N=1000带入，如果题目说信噪比30dB则带入公式求出S/N的值，再代入公式</p>
</blockquote>
<h3 id="意义-1"><a href="#意义-1" class="headerlink" title="意义"></a>意义</h3><ul>
<li>信噪比越大，极限传输速率越高</li>
</ul>
<h3 id="考题注意：题目可能让你求奈氏准则和香农定理的速率，取其最小值为极限速率"><a href="#考题注意：题目可能让你求奈氏准则和香农定理的速率，取其最小值为极限速率" class="headerlink" title="考题注意：题目可能让你求奈氏准则和香农定理的速率，取其最小值为极限速率"></a>考题注意：题目可能让你求奈氏准则和香农定理的速率，取其最小值为极限速率</h3><h2 id="设备（处理信号）"><a href="#设备（处理信号）" class="headerlink" title="设备（处理信号）"></a>设备（处理信号）</h2><ul>
<li>中继器：<strong>再生</strong>和还原<strong>数字</strong>信号</li>
<li>集线器：多口的中继器，放大转发，不能分割冲突域，平分带宽</li>
</ul>
<h1 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h1><h2 id="definition-2"><a href="#definition-2" class="headerlink" title="definition"></a>definition</h2><p>数据链路层将网络层的数据<strong>可靠</strong>的传输到相邻接点的目标及网络层</p>
<p>作用：加强物理层传输原始比特流的功能，将物理层提供的可能出错的连接改为在逻辑上无差错的数据链路</p>
<p>简单来说：数据链路层给报文编号，可以进行流量控制，丢失重发等</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><ul>
<li>提供：无确认无连接，有确认无连接，有确认面向连接服务</li>
<li>链路管理，连接的建立、维持、释放</li>
<li>组帧</li>
<li>流量控制</li>
<li>差错控制</li>
</ul>
<h2 id="组帧"><a href="#组帧" class="headerlink" title="组帧"></a>组帧</h2><p>在网络层的数据头尾添加：帧首部，帧尾部，让对方说识别帧的开始和结束</p>
<p><img src="..\img\帧.png" alt=""></p>
<p>组帧的四种方法：（Transmission）</p>
<ul>
<li>字符计数法：帧首部第一字节记录帧的长度（传输过程中，这个字符可能被修改，或者丢失，后续帧全部错误）</li>
<li><strong>字符填充法</strong>：帧首部填充SOH（00000001）,尾部填充EOT（00000100）（数据部分有可能有SOH,EOT—&gt;解决方式，转义字符）</li>
<li>零比特填充法：比如首部01111110，则数据部分遇到五个1填充一个0，来避免假SOH</li>
<li><strong>违规编码法</strong>：如曼彻斯特会有，高-低–&gt;1，低-高–&gt;0,然后用低低和高高来做SOH,EOT</li>
</ul>
<h2 id="最大传输单元MTU"><a href="#最大传输单元MTU" class="headerlink" title="最大传输单元MTU"></a>最大传输单元MTU</h2><h3 id="why-2"><a href="#why-2" class="headerlink" title="why"></a>why</h3><p>因为一个帧中IP数据包的内容不可能无限大</p>
<h3 id="what-3"><a href="#what-3" class="headerlink" title="what"></a>what</h3><p>MTU最大传送单元</p>
<h2 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h2><p>差错分为两种：</p>
<ul>
<li><p>位错：比特位数字出错</p>
<p>修正位错：</p>
<ul>
<li>检错编码：奇偶校验，CRC循环冗余码（只知道错了）</li>
<li><strong>纠错</strong>编码：海明码（知道错了，还知道错哪儿了）</li>
</ul>
</li>
<li><p>帧错：丢失，重复，失序</p>
<p>修复帧错：</p>
<ul>
<li>重传</li>
</ul>
</li>
</ul>
<p>冗余编码：数据放松之前，附加冗余位，使之符合某种规则，接收端检查不符合规则就判断为出错（即，奇偶校验，CRC，海明码）</p>
<h3 id="奇偶校验码（n-1位信息元，1位校验元）"><a href="#奇偶校验码（n-1位信息元，1位校验元）" class="headerlink" title="奇偶校验码（n-1位信息元，1位校验元）"></a>奇偶校验码（n-1位信息元，1位校验元）</h3><ul>
<li>奇校验码：1的个数为奇数</li>
<li>偶校验码：1的个数为偶数</li>
</ul>
<p>例：1100101奇校验–&gt;<strong>1</strong>1100101</p>
<blockquote>
<p>“1”可以填到任意位置，只要有奇数个“1”，接收方就认为这一段没有出错，但如果丢了两个“1”就检查不错来了，所以出现了CRC</p>
</blockquote>
<h3 id="CRC循环冗余"><a href="#CRC循环冗余" class="headerlink" title="CRC循环冗余"></a>CRC循环冗余</h3><p>要传的数据/多项式=商……余数</p>
<p>发送的数据=要传的数据+余数（FCS帧检验序列，又称冗余码）</p>
<p>例题：1101011011 生成多项式10011</p>
<p>要传的数据末尾加上4个0，除以10011余数1110，则发送的数据为：1101011011   1110</p>
<p>检查：11010110111110%10011==0则帧没有出错，否则丢弃</p>
<p>FCS的生成及校验是硬件实现，处理迅速，不会延迟</p>
<h3 id="海明码"><a href="#海明码" class="headerlink" title="海明码"></a>海明码</h3><p>1.发现双比特错，纠正但比特错</p>
<p>2.工作原理：牵一发而动全身</p>
<p>3.确定校验码位数r–&gt;确定校验码和数据的位置–&gt;求出校验码的值–&gt;检错并纠错</p>
<h4 id="1-去顶校验码位数r"><a href="#1-去顶校验码位数r" class="headerlink" title="1.去顶校验码位数r"></a>1.去顶校验码位数r</h4><p>海明不等式：2^r≥k+r+1(r为冗余信息位，k为信息位)</p>
<p>例如：要发送的数据D=101101</p>
<p>数据位数k=6,满足不等式的最小r为4，也就是海明码有6+4=10位，即数据位6位，校验4位</p>
<h4 id="2-确定校验码和数据的位置"><a href="#2-确定校验码和数据的位置" class="headerlink" title="2.确定校验码和数据的位置"></a>2.确定校验码和数据的位置</h4><p>校验码放在2的几次方的位置，剩下填数据位就可以了</p>
<h4 id="3-求校验码的值"><a href="#3-求校验码的值" class="headerlink" title="3.求校验码的值"></a>3.求校验码的值</h4><p>第一位校验码校验二进制最后一位为1的数</p>
<p>第二位校验码校验二进制倒数第二位为1的数字</p>
<p>以此类推</p>
<p>令校验位与选中的数异或为0，就可以得到校验位的值</p>
<p>得到101101的海明码是：<strong>00</strong>1<strong>0</strong>011<strong>1</strong>01（第1,2,4,8为为校验位）</p>
<h4 id="4-检错并纠正"><a href="#4-检错并纠正" class="headerlink" title="4.检错并纠正"></a>4.检错并纠正</h4><p>取校验位做异或运算，得到的值就是出错的位置（上述例子中假设第五位出错，则四个校验码的值，拼起来的和就是5</p>
<h2 id="流量控制和可靠传输机制"><a href="#流量控制和可靠传输机制" class="headerlink" title="流量控制和可靠传输机制"></a>流量控制和可靠传输机制</h2><h3 id="what-4"><a href="#what-4" class="headerlink" title="what"></a>what</h3><p>解决发送和接受能力不匹配的问题</p>
<h3 id="difference-1"><a href="#difference-1" class="headerlink" title="difference"></a>difference</h3><table>
<thead>
<tr>
<th></th>
<th>数据链路层</th>
<th>传输层</th>
</tr>
</thead>
<tbody>
<tr>
<td>流量控制</td>
<td>点到点（相邻节点）</td>
<td>端到端</td>
</tr>
<tr>
<td>手段</td>
<td>收不下，不返回确认帧</td>
<td>接收端发送窗口公告</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="流量控制方法"><a href="#流量控制方法" class="headerlink" title="流量控制方法"></a>流量控制方法</h3><ul>
<li>停止-等待协议</li>
<li>滑动窗口协议：<ul>
<li>回退N帧协议（GBN：go back N）</li>
<li>选择重传协议SR</li>
</ul>
</li>
</ul>
<h4 id="停止-等待协议（等确认帧再发送）"><a href="#停止-等待协议（等确认帧再发送）" class="headerlink" title="停止-等待协议（等确认帧再发送）"></a>停止-等待协议（等确认帧再发送）</h4><p>没发送完一个帧就停止发送，等待对方的确认，在收到确认后在发送下一个帧</p>
<p>丢帧重传时间(数据丢之或者ack丢失)：&gt;RTT</p>
<ul>
<li><p>数据丢失重传</p>
</li>
<li><p>ack丢失，数据重传，接收方丢弃，重传ACK</p>
</li>
<li>ack迟到，数据重传，接收方丢弃，重传ACK，收到第二次发的确认帧，后续收到迟到的ack丢掉</li>
</ul>
<p>流水线技术：一次发送多帧（滑动窗口的起源）</p>
<h4 id="滑动窗口协议（窗口多帧发送）"><a href="#滑动窗口协议（窗口多帧发送）" class="headerlink" title="滑动窗口协议（窗口多帧发送）"></a>滑动窗口协议（窗口多帧发送）</h4><p>采用<strong>累积确认</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>停止等待</th>
<th>GBN</th>
<th>SR</th>
</tr>
</thead>
<tbody>
<tr>
<td>发送窗口</td>
<td>1</td>
<td>&gt;1</td>
<td>&gt;1</td>
</tr>
<tr>
<td>接受窗口</td>
<td>1</td>
<td>1</td>
<td>&gt;1</td>
</tr>
</tbody>
</table>
<p>GBN特点</p>
<ul>
<li>上层调用（发送或缓存网络层数据）</li>
<li>累计确认（ack为最后收到的帧的编号）</li>
<li>超时重传</li>
<li>（缺点，选择重传修正这个问题）接收方无缓存，延迟或者出错全部丢弃（<strong>如果1号收到2号丢失，3,4号陆续到了都丢弃，等待发送发超时重传2号帧</strong>）</li>
</ul>
<p>GBN滑动<strong>窗口的长度</strong>：<br>$$<br>1≤W≤2^n-1<br>$$<br>因为发送窗口过大，会使得对方区别新帧和旧帧，即编号的数目可能是固定的，他是循环利用的，可能会重复</p>
<p><strong>选择重传协议</strong>（SR=GBK+接收方有窗口）：缓存收到的帧，返回确认收到帧的编号（不代表编号前的帧都收到），窗口长度：<br>$$<br>1≤W≤2^n-1<br>$$<br>发送方窗口=接收方窗口（大了溢出，小了没意义）</p>
<h3 id="信道利用率"><a href="#信道利用率" class="headerlink" title="信道利用率"></a>信道利用率</h3><p>发送周期内，有效发送数据所占据的比例，也就是（发送数据帧时间）除以（发送数据帧开始到接收到ack的总时间）<br>$$<br>信道利用率=（L/C）/T<br>$$<br>L:T内发送L比特数据</p>
<p>C：发送方数据传输率</p>
<p>T:发送周期，发送到收到ack</p>
<h3 id="信道吞吐率"><a href="#信道吞吐率" class="headerlink" title="信道吞吐率"></a>信道吞吐率</h3><p>信道利用率* 发送方的发送速率</p>
<blockquote>
<p>数据传输速率4kb/s，单向传播时延30ms，如果停止等待协议的信道最大利用率达到80%，数据帧长度为？</p>
</blockquote>
<blockquote>
<p>$$<br>0.8=\frac{L/4}{L/4+2*30}<br>$$</p>
</blockquote>
<h3 id="信道划分介质访问-高效率利用传输介质"><a href="#信道划分介质访问-高效率利用传输介质" class="headerlink" title="信道划分介质访问(高效率利用传输介质)"></a>信道划分介质访问(高效率利用传输介质)</h3><p>分两种</p>
<ul>
<li>点对点链路：专有线路，如ppp协议</li>
<li>广播式链路：共享通信介质，如对讲机</li>
</ul>
<p>介质访问控制</p>
<ul>
<li>静态分配（不冲突）<ul>
<li>频分复用FDM(Frequency Division Multiplexing)</li>
<li>时分复用TDM(time)</li>
<li>波分复用WDM（wave）</li>
<li>码分复用CDM（code）</li>
</ul>
</li>
<li>动态分配<ul>
<li>轮训访问：<ul>
<li>令牌（不冲突）</li>
</ul>
</li>
<li>随机访问：（冲突）<ul>
<li>aloha</li>
<li>CSMA</li>
<li><strong>CSMA/CD</strong></li>
<li><strong>CSMA/CA</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>1.统计时分复用STDM</p>
<p>提出原因：有的主机在这个时间片不会发送信息，信道造成浪费</p>
<p>通过集中器，ABCD四个人，集中器大小设定为3，每来3个人，就发送走一波数据</p>
<p>解决TDM平分带宽的问题，集中器的TDM帧可以发送的数据都是一个人的数据，从而不影响带宽</p>
<p>2.CDMA码分多址，是CDM的一种方式</p>
</blockquote>
<h4 id="CDM（后续补充，没听懂）"><a href="#CDM（后续补充，没听懂）" class="headerlink" title="CDM（后续补充，没听懂）"></a>CDM（后续补充，没听懂）</h4><p>1个比特分为多个chip（芯片/码片），每个站点被指定一个唯一的m位的chip序列</p>
<p>如何划分信道？</p>
<blockquote>
<p>多个站点同时发送数据时候，要求各个站点芯片序列<strong>相互正交</strong></p>
<p>多个站点接收数据的时候，数据在信道中被线性相加</p>
</blockquote>
<h4 id="ALOHA协议（想发就发）"><a href="#ALOHA协议（想发就发）" class="headerlink" title="ALOHA协议（想发就发）"></a>ALOHA协议（想发就发）</h4><p>特点：不监听信道，不按时间片发送，随机重发（发的时候彼此不知道冲突，所以可能两个人都发送失败）</p>
<p>ALOHA改进：时隙ALOHA协议，将<strong>时间分片</strong>，用户在时间片开始时刻同步接入网络信道，如果冲突，则下个<strong>时间片开始</strong>时刻再发送</p>
<h4 id="CSMA协议家族（先听再发）"><a href="#CSMA协议家族（先听再发）" class="headerlink" title="CSMA协议家族（先听再发）"></a>CSMA协议家族（先听再发）</h4><blockquote>
<p>CSMA:carrier sense multiple access</p>
<p>CS:载波侦听：发送前检测</p>
<p>MA：多点接入</p>
</blockquote>
<h5 id="信道忙"><a href="#信道忙" class="headerlink" title="信道忙"></a>信道忙</h5><ul>
<li>1-坚持CSMA：<strong>一直监听</strong>到信道闲，冲突则等待随机时间再来一直监听<ul>
<li>信道利用率高</li>
<li>两个站点都坚持，死锁</li>
</ul>
</li>
<li>非坚持CSMA：等待随机时间后再监听<ul>
<li>减少冲突可能性</li>
<li>信道利用率低</li>
</ul>
</li>
<li>p-坚持CSMA：空闲以p概率传输，忙则以概率1-p等待下个时间片（不必深究），忙则等待随机时间再监听<ul>
<li>减少冲突</li>
<li>信道利用率较高</li>
<li>发生冲突后可能会坚持把数据帧发完（提出CD协议）</li>
</ul>
</li>
</ul>
<h5 id="CDMA-CD（先听再说：边听边说）"><a href="#CDMA-CD（先听再说：边听边说）" class="headerlink" title="CDMA/CD（先听再说：边听边说）"></a>CDMA/CD（先听再说：边听边说）</h5><blockquote>
<p>cd:collision detection碰撞检测</p>
</blockquote>
<p>在CSMA基础上，发送数据时也监听信道，忙则停止发送–半双工网络</p>
<p>争用期/冲突窗口/碰撞窗口：2T，如果没有碰撞则这次发送不会有冲突</p>
<p>如何确定重传？截断二进制指数规避算法（待完善）</p>
<p>最小帧长（避免还没碰撞检测完，数据已经发送结束了）：帧长&gt;=2T*数据发送速率</p>
<blockquote>
<p>以太网规定最短帧长64B，凡是小的都是无效帧，丢弃</p>
</blockquote>
<h5 id="CDMA-CA（先听再说，礼让说）"><a href="#CDMA-CA（先听再说，礼让说）" class="headerlink" title="CDMA/CA（先听再说，礼让说）"></a>CDMA/CA（先听再说，礼让说）</h5><blockquote>
<p>CA：collision acoidance避免碰撞</p>
<p>应用于无线局域网的冲突</p>
</blockquote>
<p>先检测信道是否空闲–&gt;</p>
<p>空闲时发送RTS（request to send：发送端地址，接收端地址，发送持续时间），忙则等待–&gt;</p>
<p>接收端收到RTS，响应CTS（clear to send），再次期间<strong>不会再响应别人的RTS</strong>–&gt;</p>
<p>发送方收到CTS后，开始发送数据帧（同时预约信道：发送方告知预计传输时间,从而告知别的站点多久后重发）–&gt;</p>
<p>接收端收到数据帧，采用CRC来检验数据，正确则响应ACK，如果丢失遵循上面的规避算法来确定推迟重发时间</p>
<table>
<thead>
<tr>
<th></th>
<th>CSMA/CD</th>
<th>CSMA/CA</th>
</tr>
</thead>
<tbody>
<tr>
<td>传输介质</td>
<td>有线</td>
<td>无线</td>
</tr>
<tr>
<td>载波检测方式</td>
<td>电压</td>
<td>能量检测，载波检测，能量波混合检测</td>
</tr>
<tr>
<td>冲突类型</td>
<td>检测冲突</td>
<td>避免冲突</td>
</tr>
</tbody>
</table>
<p>相同点：先听再说，监听，冲突后，有限次重传机制</p>
<h4 id="轮询访问介质访问控制"><a href="#轮询访问介质访问控制" class="headerlink" title="轮询访问介质访问控制"></a>轮询访问介质访问控制</h4><p>轮询协议：主节点<strong>轮流</strong>和从属节点发送数据</p>
<ul>
<li>轮询开销大</li>
<li>等待延迟</li>
<li>主节点故障</li>
</ul>
<p>令牌传递协议：</p>
<ul>
<li>令牌：一个特殊格式的MAC控制帧，不含任何信息</li>
<li>每个节点可以拿到令牌<strong>一段时间</strong>，发送数据</li>
<li>令牌开销大</li>
<li>等待延迟</li>
<li>单点故障</li>
<li>应用于环网</li>
<li>适用于<strong>负载重，通信量</strong>大的网络中</li>
</ul>
<h2 id="局域网（Local-Area-Network）"><a href="#局域网（Local-Area-Network）" class="headerlink" title="局域网（Local Area Network）"></a>局域网（Local Area Network）</h2><ul>
<li>范围小</li>
<li>速度较快</li>
<li>延迟短，误码率低，可靠性高</li>
<li>共享</li>
<li>分布式控制，广播式通信，能广播和组播</li>
</ul>
<p>星型拓扑，总线型拓扑（CSMA/CD，令牌总线产生逻辑环），环形拓扑（令牌环），属性拓扑</p>
<p>局域网分类：以太网，令牌环网，FDDI网,ATM网，无线局域网</p>
<p>数据链路层=逻辑链路层LLC+截止访问控制MAC层</p>
<ul>
<li>LLC识别网络层协议并封装，知道如何处理ACK，为网络层提供：无确认无连接，面向连接，带确认连接，高速传送</li>
<li>MAC，帧的封装，拆封，帧的寻址识别，发送接收，链路管理，帧差错控制，屏蔽物理链路种类的差异性</li>
</ul>
<h2 id="以太网（Ethernet）"><a href="#以太网（Ethernet）" class="headerlink" title="以太网（Ethernet）"></a>以太网（Ethernet）</h2><ul>
<li>便宜</li>
<li>使用广泛</li>
<li>相对简单</li>
<li>速率较高</li>
</ul>
<p>提供无连接，<strong>不可靠</strong>的服务：</p>
<ul>
<li>无连接：无需握手</li>
<li>不可靠，没有编号，不确认，差错丢弃（传输层负责）</li>
</ul>
<p>通过通信适配器通信：MAC地址，前24位代表厂家，后24位自己规定，常用6个十六进制数字表示</p>
<h2 id="无线局域网"><a href="#无线局域网" class="headerlink" title="无线局域网"></a>无线局域网</h2><h2 id="广域网"><a href="#广域网" class="headerlink" title="广域网"></a>广域网</h2><p>PPP协议：点对点协议，只支持全双工</p>
<ul>
<li>简单：无需纠错，无需编号，无需流量控制</li>
<li>封装成帧：帧定界符</li>
<li>透明传输：异步线路字节填充，同步线路比特填充</li>
<li>多种网络层协议：封装IP数据包采用多种协议</li>
<li>多种类型链路：串并行，同异步，光电……</li>
<li>差错检测：错丢弃</li>
<li>检测连接状态</li>
<li>最大传送单元：数据部分最大MTU</li>
<li>网络层地址协商</li>
<li>数据压缩协商</li>
</ul>
<p>PPP组成的三个部分：</p>
<ul>
<li>一个将IP数据包封装到串行链路（同异步串行）的方法</li>
<li>链路控制协议LCP：建立和维护数据链路连接</li>
<li>网络控制协议NCP：PPP支持多种网络层协议，对应NCP来配置，为网络层建立和配置逻辑连接</li>
</ul>
<p>PPP帧格式</p>
<p><img src="..\img\PPP.png" alt=""></p>
<p>HDLC协议</p>
<p>高级数据链路控制：High-level data link control，是一个同步网上传输数据，面向<strong>比特</strong>的数据链路层协议</p>
<p><img src="..\img\HDLC.png" alt="HDLC"></p>
<p>三种站：</p>
<ul>
<li>主站</li>
<li>从站</li>
<li>复合站</li>
</ul>
<p>PPP&amp;HDLC共同点</p>
<ul>
<li>全双工</li>
<li>透明传输</li>
<li>查错但不纠错</li>
</ul>
<p>不同点：</p>
<table>
<thead>
<tr>
<th>不同点</th>
<th>PPP</th>
<th>HDLC</th>
</tr>
</thead>
<tbody>
<tr>
<td>面向</td>
<td>字节</td>
<td>比特</td>
</tr>
<tr>
<td>协议字段</td>
<td>有</td>
<td>没有</td>
</tr>
<tr>
<td>序号和ACK</td>
<td>无</td>
<td>有↓</td>
</tr>
<tr>
<td>可靠性</td>
<td>不可靠</td>
<td>可靠</td>
</tr>
</tbody>
</table>
<h2 id="链路层设备"><a href="#链路层设备" class="headerlink" title="链路层设备"></a>链路层设备</h2><ul>
<li><strong>网桥</strong>：根据MAC的目的地址进行帧的转发和过滤（隔离冲突域）<ul>
<li>过滤通信量，增大吞吐量</li>
<li>扩大物理范围</li>
<li>提高可靠性</li>
<li>互联不同物理层</li>
</ul>
</li>
<li>交换机</li>
</ul>
<h3 id="网桥"><a href="#网桥" class="headerlink" title="网桥"></a>网桥</h3><ul>
<li>透明网桥：以太网上的站点不知道所发送的帧经过了哪几个网桥，是一种热插拔设备–自学习（通过广播来学习转发表）</li>
<li>源路由网桥：把详细的最佳路由信息（路由最少\时间最短）放在帧的首部——通过广播方式向目的站发送一个发送帧</li>
</ul>
<h3 id="以太网交换机（多接口网桥）"><a href="#以太网交换机（多接口网桥）" class="headerlink" title="以太网交换机（多接口网桥）"></a>以太网交换机（多接口网桥）</h3><ul>
<li>直通式：检查地址直接转发（延迟小，可靠性低，无法支持不同速率的端口交换）</li>
<li>存储转发式：将帧放入高速缓存，检查正确性，正确则转发，错误丢弃（延迟大，可靠性高，支持不同速率端口）</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>隔离冲突域</th>
<th>隔离广播域</th>
</tr>
</thead>
<tbody>
<tr>
<td>物理层（中继器，集线器）</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>链路层（网桥，交换机）</td>
<td>√</td>
<td>×</td>
</tr>
<tr>
<td>网络层（路由）</td>
<td>√</td>
<td>√</td>
</tr>
</tbody>
</table>
<p><strong>诀窍</strong></p>
<ul>
<li>广播域，0个路由1个广播域，1个路由2两个广播域</li>
<li>冲突域：链路层设备（交换机）有几根线就是几个冲突域</li>
</ul>
<h1 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h1><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务</p>
<ul>
<li>路由选择和分组转发（最佳路径OSPF）</li>
<li>异构网互联</li>
<li>控制拥塞<ul>
<li>开环控制（静）</li>
<li>闭环控制（动态控制）</li>
</ul>
</li>
</ul>
<h2 id="数据交换方式"><a href="#数据交换方式" class="headerlink" title="数据交换方式"></a>数据交换方式</h2><ul>
<li>电路交换（两端一根线直连）</li>
<li>报文交换</li>
<li>分组交换</li>
</ul>
<p>有两种连接方式</p>
<ul>
<li>数据报方式：无连接服务（无需建立连接，每个分组都有地址）</li>
<li>虚电路方式：连接服务（建立连接）</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>数据报服务</th>
<th>虚电路</th>
</tr>
</thead>
<tbody>
<tr>
<td>建立连接</td>
<td>×</td>
<td>√</td>
</tr>
<tr>
<td>目的地址</td>
<td>每个分组都有</td>
<td>建立有，分组只有虚电路号</td>
</tr>
<tr>
<td>路由选择</td>
<td>每个分组独立进行路由选择转发</td>
<td>同一路径</td>
</tr>
<tr>
<td>分组顺序</td>
<td>不保证有序</td>
<td>有序</td>
</tr>
<tr>
<td>可靠性</td>
<td>不可靠通信，可靠性由主机保证</td>
<td>可靠性由网络保证</td>
</tr>
<tr>
<td>网络故障适应性</td>
<td>遇故障丢失，其他分组路径发生变化</td>
<td>所有经过此节点都丢包</td>
</tr>
<tr>
<td>差错处理和流量控制主机</td>
<td>控制，本身不保证</td>
<td>分组交换网负责或者主机负责</td>
</tr>
</tbody>
</table>
<h2 id="报文的分装"><a href="#报文的分装" class="headerlink" title="报文的分装"></a>报文的分装</h2><p>应用层：报文</p>
<p>传输层：报文段</p>
<p>网络层：IP数据包，分组</p>
<p>数据链路层：帧</p>
<p>物理层：比特流</p>
<h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h2><p><img src="../img/TCPIP.png" alt=""></p>
<h2 id="ip数据报格式"><a href="#ip数据报格式" class="headerlink" title="ip数据报格式"></a>ip数据报格式</h2><p>ip数据报=首部+数据部分</p>
<p><img src="../img/ip.png" alt=""></p>
<h2 id="ip-数据报分片"><a href="#ip-数据报分片" class="headerlink" title="ip 数据报分片"></a>ip 数据报分片</h2><h3 id="MTU"><a href="#MTU" class="headerlink" title="MTU"></a>MTU</h3><p>以太网最大MTU是1500字节</p>
<p>IP数据报第32-63位，标识（16）+标志（3）+片偏移（13）</p>
<ul>
<li>标识（16）：统一数据报的分片使用同一标识</li>
<li>标志（4）：中间位DF，DF=1禁止分片，DF=0允许分片，最低位MF,MF=1后面还有分片，MF=0,后面没有分片了</li>
<li>片偏移：分片后相对位置，除了最后一个分片，其他都是8B的整倍数</li>
</ul>
<blockquote>
<p>总长度：单位1B</p>
<p>片偏移：单位是8B</p>
<p>首部长度：单位是4B</p>
</blockquote>
<h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><p>ip地址转化表，通过端口来实现地址映射</p>
<h2 id="IP分类"><a href="#IP分类" class="headerlink" title="IP分类"></a>IP分类</h2><h2 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h2><h2 id="无分类编址CIDR"><a href="#无分类编址CIDR" class="headerlink" title="无分类编址CIDR"></a>无分类编址CIDR</h2><p><img src="..\img\CIDR" alt="1554451416437"></p>
<h2 id="ARP（IP-MAC）"><a href="#ARP（IP-MAC）" class="headerlink" title="ARP（IP-MAC）"></a>ARP（IP-MAC）</h2><p>广播ARP请求分组</p>
<p>源ip+目的ip+源MAC+目的MAC(全1)</p>
<p>单播ARP响应分组</p>
<p>ip+mac</p>
<p>如果A–&gt;B经历5个路由，一共要使用6次ARP协议</p>
<h2 id="DHCP（应用层协议，广播，基于UDP，CS架构）"><a href="#DHCP（应用层协议，广播，基于UDP，CS架构）" class="headerlink" title="DHCP（应用层协议，广播，基于UDP，CS架构）"></a>DHCP（应用层协议，广播，基于UDP，CS架构）</h2><p>静态配置ip</p>
<p>动态配置ip–&gt;DHCP协议</p>
<ul>
<li>主机广播DHCP发现</li>
<li>DHCP服务器广播DHCP提供</li>
<li>主机广播DHCP请求</li>
<li>DHCP服务器广播DHCP确认</li>
</ul>
<h2 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h2><p>ICMP支持主机或者路由器</p>
<ul>
<li>差错报告</li>
<li>网络探寻</li>
</ul>
<table>
<thead>
<tr>
<th>ICMP报错</th>
<th>含义</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>终点不可达</td>
<td>无法交付</td>
<td></td>
</tr>
<tr>
<td>源点抑制（已取消）</td>
<td>目标向源主机发送，发慢点</td>
<td></td>
</tr>
<tr>
<td>时间超过</td>
<td>TTL=0时，发送超时报文</td>
<td></td>
</tr>
<tr>
<td>参数错误</td>
<td>首部字段有问题</td>
<td></td>
</tr>
<tr>
<td>重定向</td>
<td>让主机重新选择路由</td>
</tr>
</tbody>
</table>
<p>ICMP差错报告报文数据字段</p>
<p><img src="../img/icmp.png" alt=""></p>
<p>不发送ICMP差错报文的情况</p>
<ul>
<li>对本身的报错出错不再报错</li>
<li>第一分片报错，后去分片不报错</li>
<li>组播不报错</li>
<li>特殊地址不报错（0.0.0.0/127.0.0.1）</li>
</ul>
<p>ICMP询问报文：</p>
<ul>
<li>回送请求和回答报文（ping）</li>
<li>时间戳请求和回答报文（时间同步和测量时间）</li>
</ul>
<p>ICMP应用</p>
<ul>
<li>PING</li>
<li>Traceroute：跟踪分组发送的路径，使用ICMP时间超过差错报文</li>
</ul>
<h2 id="IPv4-32bit"><a href="#IPv4-32bit" class="headerlink" title="IPv4(32bit)"></a>IPv4(32bit)</h2><p><img src="../img/ip分类.png" alt=""></p>
<p>不能使用的ip地址</p>
<table>
<thead>
<tr>
<th>网络号</th>
<th>主机号</th>
<th>作ip源地址</th>
<th>作IP目的地址</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>全0</td>
<td>全0</td>
<td>√</td>
<td>×</td>
<td>默认路由</td>
</tr>
<tr>
<td>全0</td>
<td>特定值</td>
<td>×</td>
<td>√</td>
<td>表示本网内某个特定的主机</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>x</td>
<td>√</td>
<td>广播地址</td>
</tr>
<tr>
<td>特定值</td>
<td>全0</td>
<td>x</td>
<td>x</td>
<td>网络地址，表示一个网络</td>
</tr>
<tr>
<td>特定值</td>
<td>全1</td>
<td>x</td>
<td>√</td>
<td>直接广播地址，对特定网络上的所有主机广播</td>
</tr>
<tr>
<td>127</td>
<td>除全0,1</td>
<td>√</td>
<td>√</td>
<td>用于本地软件换回测试</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>另一种</td>
<td>地址范围</td>
<td>网段数</td>
<td></td>
<td></td>
</tr>
<tr>
<td>A类</td>
<td>10.0.0.0~10.255.255.255</td>
<td>1</td>
<td></td>
<td></td>
</tr>
<tr>
<td>B</td>
<td>172.16.0.0~172.31.255.255</td>
<td>16</td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>192.168.0.0~192.168.255.255</td>
<td>256</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>ABC为专属内部网络地址</p>
</blockquote>
<h2 id="IPv6（128bit）"><a href="#IPv6（128bit）" class="headerlink" title="IPv6（128bit）"></a>IPv6（128bit）</h2><p>首部40bit+有效负荷（≥64k）</p>
<h2 id="网络层设备"><a href="#网络层设备" class="headerlink" title="网络层设备"></a>网络层设备</h2><h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><ul>
<li>静态路由算法</li>
<li>动态路由算法<ul>
<li>全局性：链路状态路由算法OSPF（规模大）</li>
<li>分散性：距离向量路由算法RIP（规模小）</li>
</ul>
</li>
</ul>
<p>自制系统AS：在单一技术管理下的一组路由器（一个局域网内，自己管理自己的，要不然路由算法无法完成）</p>
<p>路由选择协议</p>
<ul>
<li>内部网关协议IGP（AS内）RIP,OSPF</li>
<li>外部网关协议EGP（AS间）BGP</li>
</ul>
<h4 id="RIP"><a href="#RIP" class="headerlink" title="RIP"></a>RIP</h4><p>定义：一种分布式基于距离向量的路由选择协议，简单，维护自己到目的网络唯一最佳距离（跳数）记录</p>
<p>feature：</p>
<ul>
<li>仅相邻交换信息</li>
<li>每30s更新路由表，180s无消息则判断邻居没了</li>
<li>故障发现慢（你发现旁边故障了，但邻居以为经过你就可以到达，然后你以为经过邻居，再经过你就可以到达，循环到，双方都变成16跳，才发现网络故障）</li>
</ul>
<h4 id="OSPF（类似Dijkstra）分布式链路状态"><a href="#OSPF（类似Dijkstra）分布式链路状态" class="headerlink" title="OSPF（类似Dijkstra）分布式链路状态"></a>OSPF（类似Dijkstra）分布式链路状态</h4><p>feature：</p>
<ul>
<li>自治系统内广播（非RIP的相邻）</li>
<li>交换链路状态（费用，距离，时延，带宽等）</li>
<li>链路状态变化才更新</li>
<li>每隔30分钟刷新一次数据库中的链路状态</li>
<li>故障发现比较快</li>
</ul>
<p>OSPF分区：</p>
<p><img src="../img/OSPF.png" alt=""></p>
<h4 id="BGP"><a href="#BGP" class="headerlink" title="BGP"></a>BGP</h4><p>AS间通信，交换网络可达性信息，发生变化时更新</p>
<p>OPEN–&gt;UPDATE–&gt;KEEPALIVE–&gt;NOTIFICATION</p>
<table>
<thead>
<tr>
<th>协议</th>
<th>RIP</th>
<th>OSPF</th>
<th>BGP</th>
</tr>
</thead>
<tbody>
<tr>
<td>类型</td>
<td>内部</td>
<td>内部</td>
<td>外部</td>
</tr>
<tr>
<td>路由算法</td>
<td>距离-向量</td>
<td>链路状态</td>
<td>路径-向量</td>
</tr>
<tr>
<td>传递协议</td>
<td>udp</td>
<td>ip</td>
<td>TCP</td>
</tr>
<tr>
<td>路径选择</td>
<td>跳数最少</td>
<td>代价最低</td>
<td>较好，非最佳</td>
</tr>
<tr>
<td>交换节点</td>
<td>相邻</td>
<td>所有</td>
<td>相邻</td>
</tr>
<tr>
<td>交换内容</td>
<td>自身路由表</td>
<td>所有</td>
<td>首次整个路由表，非首次，变化内容</td>
</tr>
</tbody>
</table>
<h4 id="IP组播（D类地址）"><a href="#IP组播（D类地址）" class="headerlink" title="IP组播（D类地址）"></a>IP组播（D类地址）</h4><ul>
<li>单播</li>
<li>广播</li>
<li>组播（多播）基于UDP</li>
</ul>
<p>IGMP协议+组播路由选择协议</p>
<h1 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h1><ul>
<li>进程间逻辑通信</li>
<li>复用和分用</li>
<li>差错检测</li>
<li>TCP UDP</li>
<li>端口号（16bit）<ul>
<li>服务端0-1023</li>
<li>服务端1024-49151</li>
<li>客户端49152-65535</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>service</th>
<th>port</th>
</tr>
</thead>
<tbody>
<tr>
<td>FTP</td>
<td>21</td>
</tr>
<tr>
<td>TELNET</td>
<td>23</td>
</tr>
<tr>
<td>SMTP</td>
<td>25</td>
</tr>
<tr>
<td>DNS</td>
<td>53</td>
</tr>
<tr>
<td>TFTP</td>
<td>69</td>
</tr>
<tr>
<td>HTTP</td>
<td>80</td>
</tr>
<tr>
<td>SNMP</td>
<td>161</td>
</tr>
</tbody>
</table>
<p>Socket=ip+port</p>
<h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>FEATURE:</p>
<ul>
<li>无连接</li>
<li>不保证可靠交付</li>
<li>面向报文</li>
<li>无拥塞控制</li>
<li>首部开销小8B，小于20B（TCP）</li>
</ul>
<p>UDP检验</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>FEATURE</p>
<ul>
<li>面向连接</li>
<li>点对点</li>
<li>可靠有序</li>
<li>全双工</li>
<li>面向字节流</li>
</ul>
<p><img src="../img/tcp.png" alt=""></p>
<p>序号</p>
<p>确认号：期望收到的序号</p>
<p>数据偏移</p>
<p>URG：紧急位，值为1时高优先级发送</p>
<p>ACK：确认位，连接建立后等于1</p>
<p>PSH:推送位，值为1时，接收方尽快交付给应用进程</p>
<p>RST：复位，必须释放连接</p>
<p>SYN：同步位，1，标明是一个连接请求/连接接受报文</p>
<p>FIN：释放连接</p>
<p>窗口：接受窗口，即允许发送方的数据量</p>
<p>校验和</p>
<p>紧急指针：指出URG=1时，紧急数据的字节数</p>
<h4 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h4><p><img src="../img/tcp建立连接.png" alt=""></p>
<h4 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h4><p><img src="../img/tcp释放连接.png" alt=""></p>
<h2 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h2><h2 id="窗口控制"><a href="#窗口控制" class="headerlink" title="窗口控制"></a>窗口控制</h2><p>待补充</p>

      </div>
      
      
      
    </div>
    

    
    
    


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">基础概念</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OSI-%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%EF%BC%8CTCPIP%E5%9B%9B%E5%B1%82"><span class="nav-number">2.</span> <span class="nav-text">OSI 七层模型，TCPIP四层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#why"><span class="nav-number">2.1.</span> <span class="nav-text">why</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#what"><span class="nav-number">2.2.</span> <span class="nav-text">what</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#difference"><span class="nav-number">2.3.</span> <span class="nav-text">difference</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="nav-number">3.</span> <span class="nav-text">传输介质</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#what-1"><span class="nav-number">3.1.</span> <span class="nav-text">what</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%B1%BB"><span class="nav-number">3.2.</span> <span class="nav-text">分类</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="nav-number">4.</span> <span class="nav-text">物理层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#why-1"><span class="nav-number">4.1.</span> <span class="nav-text">why</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#what-2"><span class="nav-number">4.2.</span> <span class="nav-text">what</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">4.3.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E7%A0%81"><span class="nav-number">4.4.</span> <span class="nav-text">编码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99%EF%BC%88%E5%A5%88%E5%A5%8E%E6%96%AF%E7%89%B9%E5%AE%9A%E7%90%86%EF%BC%8C%E4%BC%A0%E8%BE%93%E6%9E%81%E9%99%90%EF%BC%8C%E9%81%BF%E5%85%8D%E7%A0%81%E9%97%B4%E4%B8%B2%E6%89%B0%EF%BC%89"><span class="nav-number">4.5.</span> <span class="nav-text">奈氏准则（奈奎斯特定理，传输极限，避免码间串扰）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#definition"><span class="nav-number">4.5.1.</span> <span class="nav-text">definition</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%81%E9%99%90%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E7%8E%87"><span class="nav-number">4.5.2.</span> <span class="nav-text">极限数据传输率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%84%8F%E4%B9%89"><span class="nav-number">4.5.3.</span> <span class="nav-text">意义</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86%EF%BC%88%E4%BF%A1%E5%99%AA%E6%AF%94%EF%BC%89"><span class="nav-number">4.6.</span> <span class="nav-text">香农定理（信噪比）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#definition-1"><span class="nav-number">4.6.1.</span> <span class="nav-text">definition</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E9%80%9F%E7%8E%87"><span class="nav-number">4.6.2.</span> <span class="nav-text">传输速率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%84%8F%E4%B9%89-1"><span class="nav-number">4.6.3.</span> <span class="nav-text">意义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%80%83%E9%A2%98%E6%B3%A8%E6%84%8F%EF%BC%9A%E9%A2%98%E7%9B%AE%E5%8F%AF%E8%83%BD%E8%AE%A9%E4%BD%A0%E6%B1%82%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99%E5%92%8C%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86%E7%9A%84%E9%80%9F%E7%8E%87%EF%BC%8C%E5%8F%96%E5%85%B6%E6%9C%80%E5%B0%8F%E5%80%BC%E4%B8%BA%E6%9E%81%E9%99%90%E9%80%9F%E7%8E%87"><span class="nav-number">4.6.4.</span> <span class="nav-text">考题注意：题目可能让你求奈氏准则和香农定理的速率，取其最小值为极限速率</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%EF%BC%88%E5%A4%84%E7%90%86%E4%BF%A1%E5%8F%B7%EF%BC%89"><span class="nav-number">4.7.</span> <span class="nav-text">设备（处理信号）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="nav-number">5.</span> <span class="nav-text">数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#definition-2"><span class="nav-number">5.1.</span> <span class="nav-text">definition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">5.2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%B8%A7"><span class="nav-number">5.3.</span> <span class="nav-text">组帧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83MTU"><span class="nav-number">5.4.</span> <span class="nav-text">最大传输单元MTU</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#why-2"><span class="nav-number">5.4.1.</span> <span class="nav-text">why</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#what-3"><span class="nav-number">5.4.2.</span> <span class="nav-text">what</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6"><span class="nav-number">5.5.</span> <span class="nav-text">差错控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C%E7%A0%81%EF%BC%88n-1%E4%BD%8D%E4%BF%A1%E6%81%AF%E5%85%83%EF%BC%8C1%E4%BD%8D%E6%A0%A1%E9%AA%8C%E5%85%83%EF%BC%89"><span class="nav-number">5.5.1.</span> <span class="nav-text">奇偶校验码（n-1位信息元，1位校验元）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CRC%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99"><span class="nav-number">5.5.2.</span> <span class="nav-text">CRC循环冗余</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%B7%E6%98%8E%E7%A0%81"><span class="nav-number">5.5.3.</span> <span class="nav-text">海明码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%8E%BB%E9%A1%B6%E6%A0%A1%E9%AA%8C%E7%A0%81%E4%BD%8D%E6%95%B0r"><span class="nav-number">5.5.3.1.</span> <span class="nav-text">1.去顶校验码位数r</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%A1%AE%E5%AE%9A%E6%A0%A1%E9%AA%8C%E7%A0%81%E5%92%8C%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-number">5.5.3.2.</span> <span class="nav-text">2.确定校验码和数据的位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%B1%82%E6%A0%A1%E9%AA%8C%E7%A0%81%E7%9A%84%E5%80%BC"><span class="nav-number">5.5.3.3.</span> <span class="nav-text">3.求校验码的值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E6%A3%80%E9%94%99%E5%B9%B6%E7%BA%A0%E6%AD%A3"><span class="nav-number">5.5.3.4.</span> <span class="nav-text">4.检错并纠正</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E5%92%8C%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6"><span class="nav-number">5.6.</span> <span class="nav-text">流量控制和可靠传输机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#what-4"><span class="nav-number">5.6.1.</span> <span class="nav-text">what</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#difference-1"><span class="nav-number">5.6.2.</span> <span class="nav-text">difference</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="nav-number">5.6.3.</span> <span class="nav-text">流量控制方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE%EF%BC%88%E7%AD%89%E7%A1%AE%E8%AE%A4%E5%B8%A7%E5%86%8D%E5%8F%91%E9%80%81%EF%BC%89"><span class="nav-number">5.6.3.1.</span> <span class="nav-text">停止-等待协议（等确认帧再发送）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE%EF%BC%88%E7%AA%97%E5%8F%A3%E5%A4%9A%E5%B8%A7%E5%8F%91%E9%80%81%EF%BC%89"><span class="nav-number">5.6.3.2.</span> <span class="nav-text">滑动窗口协议（窗口多帧发送）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="nav-number">5.6.4.</span> <span class="nav-text">信道利用率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E9%81%93%E5%90%9E%E5%90%90%E7%8E%87"><span class="nav-number">5.6.5.</span> <span class="nav-text">信道吞吐率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE-%E9%AB%98%E6%95%88%E7%8E%87%E5%88%A9%E7%94%A8%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="nav-number">5.6.6.</span> <span class="nav-text">信道划分介质访问(高效率利用传输介质)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CDM%EF%BC%88%E5%90%8E%E7%BB%AD%E8%A1%A5%E5%85%85%EF%BC%8C%E6%B2%A1%E5%90%AC%E6%87%82%EF%BC%89"><span class="nav-number">5.6.6.1.</span> <span class="nav-text">CDM（后续补充，没听懂）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ALOHA%E5%8D%8F%E8%AE%AE%EF%BC%88%E6%83%B3%E5%8F%91%E5%B0%B1%E5%8F%91%EF%BC%89"><span class="nav-number">5.6.6.2.</span> <span class="nav-text">ALOHA协议（想发就发）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSMA%E5%8D%8F%E8%AE%AE%E5%AE%B6%E6%97%8F%EF%BC%88%E5%85%88%E5%90%AC%E5%86%8D%E5%8F%91%EF%BC%89"><span class="nav-number">5.6.6.3.</span> <span class="nav-text">CSMA协议家族（先听再发）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%A1%E9%81%93%E5%BF%99"><span class="nav-number">5.6.6.3.1.</span> <span class="nav-text">信道忙</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CDMA-CD%EF%BC%88%E5%85%88%E5%90%AC%E5%86%8D%E8%AF%B4%EF%BC%9A%E8%BE%B9%E5%90%AC%E8%BE%B9%E8%AF%B4%EF%BC%89"><span class="nav-number">5.6.6.3.2.</span> <span class="nav-text">CDMA&#x2F;CD（先听再说：边听边说）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CDMA-CA%EF%BC%88%E5%85%88%E5%90%AC%E5%86%8D%E8%AF%B4%EF%BC%8C%E7%A4%BC%E8%AE%A9%E8%AF%B4%EF%BC%89"><span class="nav-number">5.6.6.3.3.</span> <span class="nav-text">CDMA&#x2F;CA（先听再说，礼让说）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AE%E8%AF%A2%E8%AE%BF%E9%97%AE%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="nav-number">5.6.6.4.</span> <span class="nav-text">轮询访问介质访问控制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%88Local-Area-Network%EF%BC%89"><span class="nav-number">5.7.</span> <span class="nav-text">局域网（Local Area Network）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%EF%BC%88Ethernet%EF%BC%89"><span class="nav-number">5.8.</span> <span class="nav-text">以太网（Ethernet）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="nav-number">5.9.</span> <span class="nav-text">无线局域网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B9%BF%E5%9F%9F%E7%BD%91"><span class="nav-number">5.10.</span> <span class="nav-text">广域网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="nav-number">5.11.</span> <span class="nav-text">链路层设备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E6%A1%A5"><span class="nav-number">5.11.1.</span> <span class="nav-text">网桥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%EF%BC%88%E5%A4%9A%E6%8E%A5%E5%8F%A3%E7%BD%91%E6%A1%A5%EF%BC%89"><span class="nav-number">5.11.2.</span> <span class="nav-text">以太网交换机（多接口网桥）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="nav-number">6.</span> <span class="nav-text">网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD"><span class="nav-number">6.1.</span> <span class="nav-text">功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="nav-number">6.2.</span> <span class="nav-text">数据交换方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%A5%E6%96%87%E7%9A%84%E5%88%86%E8%A3%85"><span class="nav-number">6.3.</span> <span class="nav-text">报文的分装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IP"><span class="nav-number">6.4.</span> <span class="nav-text">IP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="nav-number">6.5.</span> <span class="nav-text">ip数据报格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ip-%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="nav-number">6.6.</span> <span class="nav-text">ip 数据报分片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MTU"><span class="nav-number">6.6.1.</span> <span class="nav-text">MTU</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NAT"><span class="nav-number">6.7.</span> <span class="nav-text">NAT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IP%E5%88%86%E7%B1%BB"><span class="nav-number">6.8.</span> <span class="nav-text">IP分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="nav-number">6.9.</span> <span class="nav-text">子网掩码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80CIDR"><span class="nav-number">6.10.</span> <span class="nav-text">无分类编址CIDR</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ARP%EF%BC%88IP-MAC%EF%BC%89"><span class="nav-number">6.11.</span> <span class="nav-text">ARP（IP-MAC）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DHCP%EF%BC%88%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%8C%E5%B9%BF%E6%92%AD%EF%BC%8C%E5%9F%BA%E4%BA%8EUDP%EF%BC%8CCS%E6%9E%B6%E6%9E%84%EF%BC%89"><span class="nav-number">6.12.</span> <span class="nav-text">DHCP（应用层协议，广播，基于UDP，CS架构）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ICMP"><span class="nav-number">6.13.</span> <span class="nav-text">ICMP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv4-32bit"><span class="nav-number">6.14.</span> <span class="nav-text">IPv4(32bit)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%EF%BC%88128bit%EF%BC%89"><span class="nav-number">6.15.</span> <span class="nav-text">IPv6（128bit）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="nav-number">6.16.</span> <span class="nav-text">网络层设备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1"><span class="nav-number">6.16.1.</span> <span class="nav-text">路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RIP"><span class="nav-number">6.16.1.1.</span> <span class="nav-text">RIP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OSPF%EF%BC%88%E7%B1%BB%E4%BC%BCDijkstra%EF%BC%89%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81"><span class="nav-number">6.16.1.2.</span> <span class="nav-text">OSPF（类似Dijkstra）分布式链路状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#BGP"><span class="nav-number">6.16.1.3.</span> <span class="nav-text">BGP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP%E7%BB%84%E6%92%AD%EF%BC%88D%E7%B1%BB%E5%9C%B0%E5%9D%80%EF%BC%89"><span class="nav-number">6.16.1.4.</span> <span class="nav-text">IP组播（D类地址）</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="nav-number">7.</span> <span class="nav-text">传输层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#UDP"><span class="nav-number">7.1.</span> <span class="nav-text">UDP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP"><span class="nav-number">7.2.</span> <span class="nav-text">TCP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="nav-number">7.2.0.1.</span> <span class="nav-text">三次握手</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-number">7.2.0.2.</span> <span class="nav-text">四次挥手</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="nav-number">7.3.</span> <span class="nav-text">流量控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E6%8E%A7%E5%88%B6"><span class="nav-number">7.4.</span> <span class="nav-text">窗口控制</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhang Zehai</p>
  <div class="site-description" itemprop="description">会做饭的厨子</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Zehai</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'dark',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

</body>
</html>
